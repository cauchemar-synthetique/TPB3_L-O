# II. Servicer le programme

## Sommaire

- [II. Servicer le programme](#ii-servicer-le-programme)
  - [Sommaire](#sommaire)
  - [1. CrÃ©ation du service](#1-crÃ©ation-du-service)
  - [2. Tests](#2-tests)

## 1. CrÃ©ation du service

ğŸŒ **CrÃ©er un service `efrei_server.service`**

- pour cela, il faut crÃ©er le fichier suivant : `/etc/systemd/system/efrei_server.service`

```bash
sudo nano /etc/systemd/system/efrei_server.service
```
- avec le contenu (simpliste) suivant :


```systemd
[Unit]
Description=Super serveur EFREI
 
[Service]
ExecStart=/home/cauchemar/efrei_server
EnvironmentFile=/etc/systemd/system/EnvironmentFile
```

âœ **Une fois le fichier `/etc/systemd/system/efrei_server.service` crÃ©Ã©** :

```bash
sudo systemctl daemon-reload
```

## 2. Tests

ğŸŒ **ExÃ©cuter la commande `systemctl status efrei_server`**

```bash
$ systemctl status efrei_server
â—‹ efrei_server.service - Super serveur EFREI
     Loaded: loaded (/etc/systemd/system/efrei_server.service; static)
     Active: inactive (dead)
```

ğŸŒ **DÃ©marrer le service**

```bash
sudo systemctl start efrei_server
```

âœ Vous pourrez **voir les logs du service** avec la commande 
```bash
journalctl -xe -u efrei_server
```

ğŸŒ **VÃ©rifier que le programme tourne correctement**

```bash 
$ systemctl status efrei_server
â— efrei_server.service - Super serveur EFREI
     Loaded: loaded (/etc/systemd/system/efrei_server.service; static)
     Active: active (running) since Wed 2024-09-12 20:15:10 CEST; 4s ago
   Main PID: 1947 (app)
      Tasks: 2 (limit: 11112)
     Memory: 38.5M
        CPU: 310ms
     CGroup: /system.slice/efrei_server.service
             â”œâ”€1947 /usr/local/bin/efrei_server/app
             â””â”€1948 /usr/local/bin/efrei_server/app

Sep 11 23:45:31 rocky systemd[1]: Started Super serveur EFREI.
```
